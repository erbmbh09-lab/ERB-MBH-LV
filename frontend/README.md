# ูุธุงู ุชุฎุทูุท ููุงุฑุฏ ุงููุคุณุณุงุช (ERP) ูููุชุจ ูุญูุฏ ุจูู ูุงุดู ูููุญุงูุงุฉ

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงููุณุชูุฏุน ูุญุชูู ุนูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููุธุงู ERP ุงููุตูู ุฎุตูุตูุง ูููุชุจ ูุญูุฏ ุจูู ูุงุดู ูููุญุงูุงุฉ ูุงูุงุณุชุดุงุฑุงุช ุงููุงููููุฉ. ุชู ุจูุงุก ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู Angular (v20+) ููู ุชุทุจูู ุฃุญุงุฏู ุงูุตูุญุฉ (SPA) ูุง ูุนุชูุฏ ุนูู `zone.js` (Zoneless).

---

### ๐ **ุฏููู ุชูุงูู ุงููุงุฌูุฉ ุงูุฎูููุฉ**

ููุญุตูู ุนูู ุฌููุน ุงูุชูุงุตูู ุงููููุฉ ุงููุทููุจุฉ ูุจูุงุก ุงููุงุฌูุฉ ุงูุฎูููุฉ (API) ุงูุชู ุชุฎุฏู ูุฐุง ุงูุชุทุจููุ ุจูุง ูู ุฐูู ููุงุฐุฌ ุงูุจูุงูุงุชุ ูููุงุท ุงูููุงูุฉ ุงูููุชุฑุญุฉุ ูููุทู ุงูุนูููุงุชุ ูุฑุฌู ุงูุฑุฌูุน ุฅูู ุงูุฏููู ุงููุฎุตุต:

**[ุงูุชูู ุฅูู ุฏููู ุชูุงูู ุงููุงุฌูุฉ ุงูุฎูููุฉ](./integrations.md)**

---

### ุงูุจููุฉ ุงููููููุฉ ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ (Architectural Approach & State Management)

ูุนุชูุฏ ูุฐุง ุงูุชุทุจูู ุนูู ุฃุญุฏุซ ุงูููุงุฑุณุงุช ูู Angular ูุชุญููู ุฃุฏุงุก ุนุงูู ููุงุจููุฉ ุตูุงูุฉ ููุชุงุฒุฉ. ุฅููู ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุฃุฏูุงุช ูุงูุฃููุงุท ุงููุณุชุฎุฏูุฉ:

-   **ุงูุฎุฏูุงุช (Services) ููุฑูุฒ ููููุทู**: ุฌููุน ููุทู ุงูุฃุนูุงู (business logic) ูุงูุชูุงุนูุงุช ูุน ุงููุงุฌูุฉ ุงูุฎูููุฉ (API calls) ุชุชู ุฏุงุฎู ุงูุฎุฏูุงุช ุงููุชุฎุตุตุฉ (`case.service.ts`, `hr.service.ts`, ุฅูุฎ).

-   **`DataHubService`**: ุชู ุฅูุดุงุก ุฎุฏูุฉ "ูุญูุฑ" ูุฑูุฒูุฉ ูู `src/services/data-hub.service.ts`. ูุฐู ุงูุฎุฏูุฉ ูุง ุชุญุชูู ุนูู ุจูุงูุงุชุ ุจู ุชููู ุจุญูู ุฌููุน ุงูุฎุฏูุงุช ุงููุชุฎุตุตุฉ ุงูุฃุฎุฑู ูุชููุฑ ููุทุฉ ูุตูู ููุญุฏุฉ ููููููุงุชุ ููุง ูุณูู ุฅุฏุงุฑุฉ ุงูุงุนุชูุงุฏูุงุช.

-   **Angular Signals ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ**:
    -   **`signal()`**: ูู ุงูุฃุฏุงุฉ ุงูุฃุณุงุณูุฉ ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ. ูุชู ุชุฎุฒูู ุจูุงูุงุช ุงูุชุทุจูู (ูุซู ูุงุฆูุฉ ุงููุถุงูุงุ ูุงุฆูุฉ ุงูุนููุงุก) ูู signals ูุชูููุฑ ุชุญุฏูุซุงุช ุชูุงุนููุฉ ูููุฑูุฉ ููุงุฌูุฉ ุงููุณุชุฎุฏู.
    -   **`computed()`**: ุชูุณุชุฎุฏู ุจูุซุงูุฉ ูุงุดุชูุงู ุจูุงูุงุช ุฌุฏูุฏุฉ ูู signals ุฃุฎุฑู (ูุซู ููุชุฑุฉ ูุงุฆูุฉ ุงููุถุงูุง ุจูุงุกู ุนูู ูุนุงููุฑ ุงูุจุญุซ). ูุฐู ุงูุทุฑููุฉ ูุนุงูุฉ ููุบุงูุฉ ูุฃููุง ูุง ุชูุนูุฏ ุงูุญุณุงุจ ุฅูุง ุนูุฏ ุชุบููุฑ ุงูุฅุดุงุฑุงุช ุงููุตุฏุฑ.

-   **RxJS Observables ููุนูููุงุช ุบูุฑ ุงููุชุฒุงููุฉ**:
    -   ุนูู ุงูุฑุบู ูู ุฃู Signals ูู ุงูุฃุณุงุณ ูุฅุฏุงุฑุฉ ุงูุญุงูุฉุ ุชุธู `RxJS Observables` ุงูุฃุฏุงุฉ ุงููุซุงููุฉ ููุชุนุงูู ูุน ุงูุชุฏููุงุช ุบูุฑ ุงููุชุฒุงููุฉุ ูุฎุตูุตูุง ุงุณุชุฏุนุงุกุงุช `HttpClient` ูุฌูุจ ุงูุจูุงูุงุช ูู ุงูุฎุงุฏู.
    -   **ุงูููุท ุงููุชุจุน**: ุชููู ุงูุฎุฏูุฉ ุจุงุณุชุฏุนุงุก ููุทุฉ ุงูููุงูุฉ (API endpoint) ุจุงุณุชุฎุฏุงู `HttpClient`ุ ูุงูุฐู ููุฑุฌุน `Observable`. ุบุงูุจูุง ูุง ูุชู ุชุญููู ูุฐุง `Observable` ุฅูู `Signal` ุฏุงุฎู ุงูุฎุฏูุฉ ุฃู ุงูููููุ ููุง ูุฏูุฌ ููุฉ RxJS ูุน ุจุณุงุทุฉ ูุฃุฏุงุก Signals.

ูุฐู ุงูุจููุฉ ุชุถูู ูุตููุง ูุงุถุญูุง ูููุณุคูููุงุชุ ูุชุฏูู ุจูุงูุงุช ูููู ุงูุชูุจุค ุจูุ ูุฃุฏุงุกู ููุชุงุฒูุง ุจูุถู ุงูุชุญุฏูุซุงุช ุงูุฏูููุฉ ุงูุชู ุชููุฑูุง Signals.

---

### ุฃููุงุท ุชุฏูู ุงูุจูุงูุงุช (Data Flow Patterns)

ูุนุชูุฏ ูุฐุง ุงูุชุทุจูู ุจุดูู ุฃุณุงุณู ุนูู **ุชุฏูู ุงูุจูุงูุงุช ุฃุญุงุฏู ุงูุงุชุฌุงู (Unidirectional Data Flow)** ุจุงุนุชุจุงุฑู ุงูููุฌ ุงูุฑุฆูุณู ูุถูุงู ูุงุจููุฉ ุงูุชูุจุค ูุงูุฃุฏุงุก ุงูุนุงูู. ููุน ุฐููุ ูุชู ุงุณุชุฎุฏุงู **ุงูุฑุจุท ุซูุงุฆู ุงูุงุชุฌุงู (Two-Way Data Binding)** ูู ุญุงูุงุช ูุญุฏุฏุฉ ูุจุณูุทุฉ ููุฑุงุญุฉ ูุณุฑุนุฉ ุงูุชุทููุฑ.

#### 1. ุชุฏูู ุงูุจูุงูุงุช ุฃุญุงุฏู ุงูุงุชุฌุงู (ุงูููุฌ ุงูุฃุณุงุณู)

ูุฐุง ูู ุงูุนููุฏ ุงูููุฑู ููุชุทุจููุ ุญูุซ ูุถูู ุฃู ุชุฏูู ุงูุจูุงูุงุช ูุงุถุญ ููููู ุชุชุจุนู. ุงูุฏูุฑุฉ ุชููู ุฏุงุฆููุง: **ุงูุญุงูุฉ (State) โ ุงูุนุฑุถ (View) โ ุงูุฅุฌุฑุงุก (Action) โ ุชุญุฏูุซ ุงูุญุงูุฉ (Update)**.

##### ููุงุถุน ุงูุงุณุชุฎุฏุงู:

-   **ุงูููุงุฐุฌ ุงูุชูุงุนููุฉ (Reactive Forms)**: ูุฐุง ูู ุงููุซุงู ุงูุฃูุถุญ. ุฌููุน ุงูููุงุฐุฌ ุงููุนูุฏุฉ ูุซู ูููุฐุฌ ุฅุถุงูุฉ ูุถูุฉ (`add-case-form.component.ts`) ููููุฐุฌ ุฅุฏุงุฑุฉ ุงูุนููุงุก (`client-management.component.ts`) ุชุณุชุฎุฏู `ReactiveFormsModule`. ูู ูุฐุง ุงูููุทุ ูููู `FormGroup` ูู ููุฏ TypeScript ูู ูุตุฏุฑ ุงูุญูููุฉ ุงููุญูุฏุ ููุชู ุชุญุฏูุซู ุงุณุชุฌุงุจุฉู ูุฃุญุฏุงุซ ุงููุณุชุฎุฏู.
    ```typescript
    // client-management.component.ts
    clientForm = this.fb.group({
      nameAr: ['', Validators.required],
      // ...
    });
    ```
    ```html
    <!-- client-management.component.html -->
    <form [formGroup]="clientForm">
      <input type="text" formControlName="nameAr">
    </form>
    ```

-   **ุงูููุงุชุฑ ูุงูุจุญุซ (Signals)**: ุนูุฏ ุงูุชุนุงูู ูุน ููุงุชุฑ ุงูุจุญุซุ ูุชู ุงุณุชุฎุฏุงู ุงูุฑุจุท ุฃุญุงุฏู ุงูุงุชุฌุงู ุจุดูู ุตุฑูุญ ูุฑุจุท ูููุฉ ุงูุญูู ุจู `signal` ูุชุญุฏูุซู ุนุจุฑ ุญุฏุซ.
    ```html
    <!-- case-management.component.html -->
    <input type="text"
      [ngModel]="searchTerm()" 
      (ngModelChange)="searchTerm.set($event)">
    ```
    -   `[ngModel]` ูุฑุจุท ุงููููุฉ ูู ุงุชุฌุงู ูุงุญุฏ (ูู ุงูู `signal` ุฅูู ุญูู ุงูุฅุฏุฎุงู).
    -   `(ngModelChange)` ููุชุดู ุชุบููุฑุงุช ุงููุณุชุฎุฏู ููููู ุจุชุญุฏูุซ ุงูู `signal`.

#### 2. ุงูุฑุจุท ุซูุงุฆู ุงูุงุชุฌุงู (ููุญุงูุงุช ุงูุจุณูุทุฉ)

ููุณุชุฎุฏู ูุฐุง ุงูููุท ุนุจุฑ ุงูุตูุบุฉ ุงููุฎุชุตุฑุฉ `[(ngModel)]` ("banana in a box") ูุชูููุฑ ุงูููุช ูู ุงูุญุงูุงุช ุงูุชู ูุง ุชุชุทูุจ ููุทููุง ูุนูุฏูุง ุนูุฏ ุชุญุฏูุซ ุงูุจูุงูุงุช.

**ููุงุญุธุฉ ูููุฉ**: ุญุชู `[(ngModel)]` ูู ูู ุงููุงูุน "ุงุฎุชุตุงุฑ ูุญูู" (syntactic sugar) ูููู ูุชุฑุฌู Angular ุจุชุญูููู ุฅูู ุฑุจุท ุฃุญุงุฏู ุงูุงุชุฌุงู (`[ngModel]` ู `(ngModelChange)`) ุฎูู ุงูููุงููุณ.

##### ููุงุถุน ุงูุงุณุชุฎุฏุงู:

-   **ุญููู ุงูุฅุฏุฎุงู ุงูุจุณูุทุฉ**: ูู ุงูููููุงุช ุงูุชู ุชุญุชูู ุนูู ุญููู ุฅุฏุฎุงู ุจุณูุทุฉ ูุง ุชุญุชุงุฌ ุฅูู ุฃู ุชุญูููุงุช ุฃู ููุทู ุนูุฏ ุงูุชุบููุฑุ ูุซู ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู.
    ```html
    <!-- ai-assistant.component.html -->
    <input type="text" [(ngModel)]="userInput" ... >
    ```
-   **ุญููู ุจุณูุทุฉ ูู ููุงุฐุฌ ูุนูุฏุฉ**: ูู ุจุนุถ ุงูุฃุญูุงูุ ุฏุงุฎู ูููุฐุฌ ูุจูุฑุ ูุฏ ููุฌุฏ ุญูู ุจุณูุท ูุง ูุคุซุฑ ุนูู ุจููุฉ ุงููููุฐุฌุ ููุชู ุงุณุชุฎุฏุงู ุงูุฑุจุท ุงูุซูุงุฆู ูุชุจุณูุทู.
    ```html
    <!-- add-case-form.component.html -->
    <input type="text" [(ngModel)]="counterClaimId" ... >
    ```

---

### ุงุณุชุฑุงุชูุฌูุฉ ุงูุงุฎุชุจุงุฑ ุงูุดุงูู (End-to-End Testing Strategy)

ูุถูุงู ุชูุงูู ูุงุฌุญ ูุณูุณุ **ูุฌุจ ุงูุงูุชุฒุงู ุจุชุทุจูู ุงุณุชุฑุงุชูุฌูุฉ ุงุฎุชุจุงุฑุงุช ุดุงููุฉ (End-to-End - E2E)**. ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุชุญุงูู ุชุฏูู ุงูุนูู ุงููุงูู ูููุณุชุฎุฏู ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ ูู ูุชุตูุญ ูุนููุ ููู ุญูููุฉ ูุถูุงู ุงุณุชูุฑุงุฑ ุงููุธุงู.

#### ูุงุฐุง ุชุฎุชุจุฑ:

*   **ูุณุงุฑุงุช ุงูุชุทุจูู ุงููุงููุฉ**: ูู ูููู ูููุณุชุฎุฏู ุชุณุฌูู ุงูุฏุฎููุ ูู ููููู ุฅุถุงูุฉ ูุถูุฉ ุฌุฏูุฏุฉ ูุญูุธูุงุ ูู ุชุธูุฑ ุงูุจูุงูุงุช ุงููุญููุธุฉ ุจุดูู ุตุญูุญ ูู ุงูุฃูุงูู ุงูุฃุฎุฑู ูู ุงูุชุทุจููุ
*   **ุชูุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุน ุงููุงุฌูุฉ ุงูุฎูููุฉ**: ูู ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ ุฅูู ุงูุฎุงุฏู ูุชููู ุงูุงุณุชุฌุงุจุฉ ุงููุชููุนุฉุ ูู ุชุชุนุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ูุน ุญุงูุงุช ุงูุฎุทุฃ (ูุซู `403 Forbidden` ุฃู `500 Internal Server Error`) ุจุดูู ุณูููุ

#### ุงูุฃุฏุงุฉ ุงูููุชุฑุญุฉ:

ูุชู ุงุณุชุฎุฏุงู Protractor ุจุดูู ุงูุชุฑุงุถู ูู Angularุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุนุฏูุฏ ูู ุงููุทูุฑูู ูุชุฌููู ุญุงูููุง ุฅูู ุฃุฏูุงุช ุฃุญุฏุซ ูุฃูุซุฑ ููุฉ ูุซู **Cypress** ุฃู **Playwright** ูุณูููุชูุง ูุฃุฏุงุฆูุง ุงููุงุฆู.

#### ุงูููุงุฑุณุฉ ุงูุนูููุฉ:

ุชูุนุฏ ูุฐู ุงูุงุฎุชุจุงุฑุงุช ูู **ุงูุถูุงู ุงูุฃูุถู** ูุณูุฑ ุงูุนูู ุงูููุญุฏ ูุงุชุณุงู ุงูุจูุงูุงุช ูุฃููุง ุชุญุงูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุงููุนููุฉ ุจุงููุงูู.

#### ุงูุฎูุงุตุฉ

ูุถูุงู ุณูุฑ ุนูู ููุญุฏ ูุงุชุณุงู ูู ุงูุจูุงูุงุชุ ูููุตู ุจุชุทุจูู ุงุณุชุฑุงุชูุฌูุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ:

1.  **ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ (Unit Tests)**: ูุถูุงู ุฃู ูู ุฌุฒุก (ูุซู ุฏุงูุฉ ุฃู ูููู) ูุนูู ุจุดูู ุตุญูุญ ูู ุนุฒูุฉ.
2.  **ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู (Integration Tests)**: ููุชุฃูุฏ ูู ุฃู ุงูุฃุฌุฒุงุก ุชุนูู ูุนูุง ุจุดูู ุณููู (ูุซู ูููู ูุชูุงุนู ูุน ุฎุฏูุฉ).
3.  **ุงุฎุชุจุงุฑุงุช End-to-End (E2E)**: ูุถูุงู ุฃู ุชุฏููุงุช ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ ุชุนูู ููุง ูู ูุชููุน ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ ุนุจุฑ ุงููุธุงู ุจุฃูููู.

---

## ูููู ูุดุฑูุน ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

```
/
โโโ src/
โ   โโโ components/       # ุงูููููุงุช ุงูุฑุฆูุณูุฉ ููุชุทุจูู
โ   โโโ services/         # ุงูุฎุฏูุงุช ุงููุดุชุฑูุฉ (Logic, Data)
โ   โโโ app.component.ts  # ุงููููู ุงูุฑุฆูุณู ููุชุทุจูู
โ   โโโ app.component.html
โโโ index.html            # ููู HTML ุงูุฑุฆูุณู
โโโ index.tsx             # ููุทุฉ ุงูุฏุฎูู ููุชุทุจูู (Bootstrap)
โโโ metadata.json         # ุจูุงูุงุช ูุตููุฉ ููุชุทุจูู
```

## ุงูููููุงุช ุงูุฑุฆูุณูุฉ (Components)

-   **`AppComponent`**: ุงููููู ุงูุฌุฐุฑู ุงูุฐู ูุญุชูู ุนูู ุงููููู ุงูุฃุณุงุณู ููุตูุญุฉ.
-   **`SidebarComponent`**: ุงูุดุฑูุท ุงูุฌุงูุจู ููุชููู.
-   **`DashboardComponent`**: ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ.
-   **`CaseManagementComponent`**: ูุญุฏุฉ ุฅุฏุงุฑุฉ ุงููุถุงูุง.
-   **`ClientManagementComponent`**: ูุญุฏุฉ ุฅุฏุงุฑุฉ ุงููููููู ูุงูุฎุตูู.
-   **`FinancialManagementComponent`**: ูุญุฏุฉ ุงูุฅุฏุงุฑุฉ ุงููุงููุฉ.
-   **`HrManagementComponent`**: ูุญุฏุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ.
-   **`SettingsComponent`**: ูุญุฏุฉ ุงูุฅุนุฏุงุฏุงุช ูุงูุตูุงุญูุงุช.
-   **`GoamlCheckComponent`**: ูุญุฏุฉ ุงูุชุญูู ูู ููุงุฆู ุงูุนููุจุงุช.
-   **`AiAssistantComponent`**: ูุงุฌูุฉ ุงููุณุงุนุฏ ุงูุฐูู.

## ุงูุฎุฏูุงุช (Services)

-   **`DataHubService`**: **ููุทุฉ ุงููุตูู ุงููุฑูุฒูุฉ ููุจูุงูุงุช**. ูููู ุจุญูู ุฌููุน ุงูุฎุฏูุงุช ุงููุชุฎุตุตุฉ ุงูุฃุฎุฑู.
-   **`CaseService`, `ClientService`, `HrService`, etc.**: ุฎุฏูุงุช ูุชุฎุตุตุฉุ ูู ูููุง ูุณุคูู ุนู ูุฌุงูู. **ูุฐู ูู ููุงุท ุงูุชูุงูู ุงูุฑุฆูุณูุฉ**.
-   **`ThemeService`**: ูุฅุฏุงุฑุฉ ูุธูุฑ ุงูุชุทุจูู.
-   **`NotificationService`**: ูุฅุฏุงุฑุฉ ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู ุฏุงุฎู ุงูุชุทุจูู.
-   **`PermissionService`**: ูุฅุฏุงุฑุฉ ูููู ุตูุงุญูุงุช ุงููุณุชุฎุฏููู.
-   **`AiService`**: ุชุชููู ูุณุคูููุฉ ุงูุชูุงุตู ูุน Google Gemini API.
-   **`GoogleCalendarService`**: ูุฅุฏุงุฑุฉ ุงูุชูุงูู ูุน ุชูููู ุฌูุฌู.